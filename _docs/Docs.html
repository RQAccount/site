<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
  <meta name="format-detection" content="telephone=no,email=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
  <meta name="description" content="description of your site">
  <meta name="author" content="author of the site">
  <title>Bigview 文档</title>
  <link rel="stylesheet" href="source/main.css"/>
  
  
    
        <link rel="stylesheet" href="./style/a.css"/>
    
        <link rel="stylesheet" href="./style/b.css"/>
    
  
</head>
<body class=Docs >
    <div class="ydoc">
      <header class="ydoc-header">
        <div class="ydoc-header-area">
            
            <a href="http://ued.qunar.com/ymfe/" class="navbar-brand">YMFE</a>
            
            <button class="ydocIcon navbar-toggle">&#xf020;</button>
            <nav class="ydoc-nav">
              <ul class="navbar-left">
                
                    
                    <li class="">
                        
                        <a href="index.html">主页</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="GettingStart.html">开始</a>
                        
                    </li>
                    
                    <li class="active">
                        
                        <a href="Docs.html">文档</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="Api.html">Api</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="News.html">新闻</a>
                        
                    </li>
                    
                
              </ul>
            </nav>
        </div>
    </header>
    
    <!-- <header style="height:20px"></header> -->
    
      <!-- Docs page layout -->
      

      <div class="ydoc-container">
        
        <div class="ydoc-container-content">
            
            <div class="content-left" role="complementary">
              <nav class="docs-sidebar hidden-print hidden-xs hidden-sm">
                <ul class="nav docs-sidenav">
                  
                  
                  <li>
                      <a href="#简介">简介</a>
                  </li>
                  
                  
                  
                  <li>
                      <a href="#概念">概念</a>
                  </li>
                  
                  
                  
                  
                  <ul class="nav docs-sidenav-extend">
                  
                      <li>
                          <a href="#bigpipe">bigpipe</a>
                      </li>
                  
                  
                  
                  
                  
                      <li>
                          <a href="#与传统Ajax比较">与传统Ajax比较</a>
                      </li>
                  
                  </ul>
                  
                  
                  
                  
                  <li>
                      <a href="#核心">核心</a>
                  </li>
                  
                  
                  
                  
                  <ul class="nav docs-sidenav-extend">
                  
                      <li>
                          <a href="#渲染模式">渲染模式</a>
                      </li>
                  
                  
                  
                  
                  
                      <li>
                          <a href="#生命周期">生命周期</a>
                      </li>
                  
                  </ul>
                  
                  
                  
                  
                  <li>
                      <a href="#概念">概念</a>
                  </li>
                  
                  
                  
                  
                  <ul class="nav docs-sidenav-extend">
                  
                      <li>
                          <a href="#bigpipe">bigpipe</a>
                      </li>
                  
                  
                  
                  
                  
                      <li>
                          <a href="#与传统Ajax比较">与传统Ajax比较</a>
                      </li>
                  
                  
                  
                  
                  
                      <li>
                          <a href="#说明">说明</a>
                      </li>
                  
                  </ul>
                  
                  
                  
                  
                  <li>
                      <a href="#高级">高级</a>
                  </li>
                  
                  
                  
                  
                  <ul class="nav docs-sidenav-extend">
                  
                      <li>
                          <a href="#扩展bigview">扩展bigview</a>
                      </li>
                  
                  
                  
                  
                  
                      <li>
                          <a href="#扩展biglet">扩展biglet</a>
                      </li>
                  
                  
                  
                </ul>
              </nav>
            </div>
            
            <div class="content-right right markdown-body"  role="main">
              
              <div><p>是是是</p>
</div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="简介" class="page-header">简介</h2>
                  
                  
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="概念" class="page-header">概念</h2>
                  
                  
                  
                  <div>
                      <h2 id="bigpipe">bigpipe</h2><h2 id="与传统Ajax比较">与传统Ajax比较</h2><ul>
<li>减少HTTP请求数：多个模块更新合成一个请求</li>
<li>请求数减少：多个chunk合成一个请求</li>
<li>减少开发成本：前端无需多写JavaScript代码</li>
<li>降低管理成本：模块更新由后端程序控制</li>
<li>URL优雅降级：页面链接使用真实地址</li>
<li>代码一致性：页面加载不劢态刷新模块代码相同</li>
</ul>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="核心" class="page-header">核心</h2>
                  
                  
                  
                  <div>
                      <h2 id="渲染模式">渲染模式</h2><p>支持5种bigpipe渲染模式</p>
<ul>
<li>parallel.js   并行模式， 先写布局，并行请求，但在获得所有请求的结果后再渲染</li>
<li>pipeline.js  (默认) 管线模式：即并行模式， 先写布局，并行请求，并即时渲染</li>
<li>reduce.js    顺序模式： 先写布局，按照pagelet加入顺序，依次执行，写入</li>
<li>reducerender.js 先写布局，然后顺序执行，在获得所有请求的结果后再渲染</li>
<li>render.js 一次渲染模式：即普通模式，不写入布局，所有pagelet执行完成，一次写入到浏览器。支持搜索引擎，用来支持那些不支持JS的客户端。</li>
</ul>
<h2 id="生命周期">生命周期</h2><p>bigview的生命周期</p>
<ul>
<li>before</li>
<li>.then(this.beforeRenderLayout.bind(this))</li>
<li>.then(this.renderLayout.bind(this))</li>
<li>.then(this.afterRenderLayout.bind(this))</li>
<li>.then(this.beforeRenderPagelets.bind(this))</li>
<li>.then(this.renderPagelets.bind(this))</li>
<li>.then(this.afterRenderPagelets.bind(this)</li>
<li>end</li>
</ul>
<p>bigview的生命周期精简</p>
<ul>
<li>before</li>
<li>renderLayout</li>
<li>renderPagelets</li>
<li>end</li>
</ul>
<p>biglet的生命周期</p>
<ul>
<li>before</li>
<li>.then(self.fetch.bind(self))</li>
<li>.then(self.parse.bind(self))</li>
<li>.then(self.render.bind(self))</li>
<li>end</li>
</ul>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="概念" class="page-header">概念</h2>
                  
                  
                  
                  <div>
                      <h2 id="bigpipe">bigpipe</h2><h2 id="与传统Ajax比较">与传统Ajax比较</h2><ul>
<li>减少HTTP请求数：多个模块更新合成一个请求</li>
<li>请求数减少：多个chunk合成一个请求</li>
<li>减少开发成本：前端无需多写JavaScript代码</li>
<li>降低管理成本：模块更新由后端程序控制</li>
<li>URL优雅降级：页面链接使用真实地址</li>
<li>代码一致性：页面加载不劢态刷新模块代码相同</li>
</ul>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h3 id="说明" class="page-header">说明</h3>
                  
                  
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="高级" class="page-header">高级</h2>
                  
                  
                  
                  <div>
                      <h2 id="扩展bigview">扩展bigview</h2><p>主要是根据bigview的生命周期来实现某种功能</p>
<pre><code>&#39;use strict&#39;;

const BigView = require(&#39;bigview&#39;);

module.exports = class QBigView extends BigView {
    afterRenderLayout(data) {
        ....
    }
}
</code></pre><h2 id="扩展biglet">扩展biglet</h2><pre><code>&#39;use strict&#39;

const Pagelet = require(&#39;biglet&#39;);

module.exports = class MyPagelet extends Pagelet {
    constructor() {
        super();
        this.root = __dirname;
        this.domid = &#39;reimburse&#39;;
    }

    parse() {
        let pagelet = this;
        return new Promise(function(resolve, reject) {
            return parse(pagelet).then(function (data) {
                resolve(pagelet.data = data);
            });
        });
    }

    fetch() {
        ... 
    };
}
</code></pre>
                  </div>
                  
              </div>
              
              
            </div>
        </div>
        
      </div>
     
      <footer class="footer">
        <div class="copyright">
            &copy; 2016 <a href="http://ued.qunar.com/ymfe/">YMFE</a> Team. Build by <a href="http://ued.qunar.com/ydoc/">ydoc</a>.
        </div>
      </footer>
    </div>

    
    
    <div class="open-panel"></div>
    

    <script src="source/main.js"></script>
    <script src="source/app.js"></script>
    
    <script>
        var lineHeight = 17.4;
        var EXAMPLE_MAX_HEIGHT;
        function fold(){
            // 折叠code
            $('.markdown-body pre').css({"line-height": lineHeight+"px"});
            $('.markdown-body pre').map(function(i,item){
                var $item = $(item);
                var foldnumber = $item.data('foldnumber');
                EXAMPLE_MAX_HEIGHT = lineHeight * (foldnumber || 6);
                if($item.height() >EXAMPLE_MAX_HEIGHT){
                    $item.css({ "padding-bottom":30 });
                    $item.find('code').height(EXAMPLE_MAX_HEIGHT);
                    $item.append('<span class="extend">展开更多……</span>');
                };
            });
           $('.ydoc-example').delegate('.extend','click',function(){
                var $this = $(this);
                $this.removeClass('extend').addClass('fold');
                $this.html('折叠代码');
                $this.prev().height('auto');
                $this.prev().parent().height('auto');
            });
            $('.ydoc-example').delegate('.fold','click',function(){
                var $this = $(this);
                var foldnumber = $this.parent().data('foldnumber');
                EXAMPLE_MAX_HEIGHT = lineHeight * (foldnumber || 6);
                $this.removeClass('fold').addClass('extend');
                $this.parent().height(EXAMPLE_MAX_HEIGHT);  // pre
                $this.prev().height(EXAMPLE_MAX_HEIGHT);    // code
                $this.html("展开更多……");
            });
        }
        $(document).ready(fold);
    </script>
    
    
    <script>
    var DEFAULT_SHOW_PARAMS = 5;
    $(document).ready(function() {
        // 参数默认显示 5个
        $(".docs-table tbody").each(function(){
           var paramsLength = $(this).find('tr').length,
               paramsArray = $(this).find('tr'),
               curTbody = $(this).parents('.docs-table');

           if(paramsLength > DEFAULT_SHOW_PARAMS){
               curTbody.append('<span class="extend-params">展开更多参数……</span>');
               paramsArray.each(function(index,item){
                   if(index >= DEFAULT_SHOW_PARAMS ){
                       $(this).removeClass('hide-params').addClass('hide-params');
                   }
               });
           }
        });
        $(".docs-table").delegate('.extend-params', 'click',function(){
            $(this).parents('.docs-table').find('.hide-params').addClass('show-params');
            $(this).removeClass('extend-params').addClass('fold-params');
            $(this).html('折叠参数');
        });
        $('.docs-table').delegate('.fold-params','click',function(){
            $(this).removeClass('fold-params').addClass('extend-params');
             $(this).parents('.docs-table').find('.show-params').removeClass('show-params');
            $(this).html("展开更多参数……");
        });
    });
    </script>
    

    
    <script>
        $(document).ready(function(){
            var winWidth = $(window).width(),
                $navExtend = $('.docs-sidenav-extend'),
                $contentLeft = $('.content-left');

            changeHide();
            $(window).on('resize',function(){
                winWidth = $(window).width();
                changeHide();
            })
            function changeHide(){
                if(winWidth>767){
                    var activeInit = $contentLeft.find('.active');
                    $navExtend.hide();
                    $(window).on('scroll',function(){
                        var activeChange = $contentLeft.find('.active');
                        if(activeChange[0] && activeInit !== activeChange){
                            activeInit = activeChange;
                            $navExtend.hide();
                            if(activeChange.parent()[0].tagName === 'UL'){
                                if(activeChange.next()[0] && activeChange.parent()[0].className === 'nav docs-sidenav' && activeChange.next()[0].tagName === 'UL'){
                                    activeChange.next().show();
                                }else if (activeChange.parent()[0].className === 'nav docs-sidenav-extend') {
                                    activeChange.parent().show();
                                }
                            }
                        }
                    })
                }
            }
        })
    </script>
    

    
    
      
      <script type="text/javascript" src="./scripts/a.js"></script>
      
    

</body>
</html>
